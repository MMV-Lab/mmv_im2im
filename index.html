

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Welcome to MMV Im2Im Transformation’s documentation! &mdash; MMV Im2Im Transformation 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> MMV Im2Im Transformation
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Package modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mmv_im2im.html">mmv_im2im package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mmv_im2im.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="mmv_im2im.bin.html">mmv_im2im.bin package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mmv_im2im.configs.html">mmv_im2im.configs package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mmv_im2im.data_modules.html">mmv_im2im.data_modules package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mmv_im2im.models.html">mmv_im2im.models package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mmv_im2im.postprocessing.html">mmv_im2im.postprocessing package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mmv_im2im.preprocessing.html">mmv_im2im.preprocessing package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mmv_im2im.utils.html">mmv_im2im.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mmv_im2im.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="mmv_im2im.html#module-mmv_im2im.proj_tester">mmv_im2im.proj_tester module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mmv_im2im.html#module-mmv_im2im.proj_trainer">mmv_im2im.proj_trainer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mmv_im2im.html#module-mmv_im2im">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#deploying">Deploying</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">MMV Im2Im Transformation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>Welcome to MMV Im2Im Transformation’s documentation!</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="welcome-to-mmv-im2im-transformation-s-documentation">
<h1>Welcome to MMV Im2Im Transformation’s documentation!<a class="headerlink" href="#welcome-to-mmv-im2im-transformation-s-documentation" title="Permalink to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="mmv-im2im-transformation">
<h1>MMV Im2Im Transformation<a class="headerlink" href="#mmv-im2im-transformation" title="Permalink to this heading">¶</a></h1>
<a class="reference external image-reference" href="https://github.com/MMV-Lab/mmv_im2im/actions"><img alt="Build Status" src="https://github.com/MMV-Lab/mmv_im2im/workflows/Build%20Main/badge.svg" /></a>
<a class="reference external image-reference" href="https://MMV-Lab.github.io/mmv_im2im/"><img alt="Documentation" src="https://github.com/MMV-Lab/mmv_im2im/workflows/Documentation/badge.svg" /></a>
<p>A generic python package for deep learning based image-to-image transformation in biomedical applications</p>
<p>(We are actively working on the documentation and tutorials. Submit a feature request if there is anything you need.)</p>
<hr class="docutils" />
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The overall package is designed with a generic image-to-image transformation framework, which could be directly used for semantic segmentation, instance segmentation, image restoration, image generation, labelfree prediction, staining transformation, etc.. The implementation takes advantage of the state-of-the-art ML engineering techniques for users to focus on researches without worrying about the engineering details. In our pre-print <a class="reference external" href="https://arxiv.org/abs/2209.02498">arxiv link</a>, we demonstrated the effectiveness of <em>MMV_Im2Im</em> in more than ten different biomedical problems/datasets.</p>
<ul class="simple">
<li><p>For biomedical machine learning researchers, we hope this new package could serve as the starting point for their specific problems to stimulate new biomedical image analysis or machine learning methods.</p></li>
<li><p>For experimental biomedical researchers, we hope this work can provide a holistic view of the image-to-image transformation concept with diverse examples, so that deep learning based image-to-image transformation could be further integrated into the assay development process and permit new biomedical studies that can hardly be done only with traditional experimental methods</p></li>
</ul>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<p>We recommend to <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#creating-an-environment-with-commands">create a new conda environment</a> or <a class="reference external" href="https://docs.python.org/3/library/venv.html">a virtual environment</a> with Python 3.9.</p>
<section id="basic-installation">
<h3>basic installation<a class="headerlink" href="#basic-installation" title="Permalink to this heading">¶</a></h3>
<p>(for users only using this package, not planning to change any code or make any extension):</p>
<p><strong>Stable Release:</strong> <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">mmv_im2im</span></code><span class="raw-html-m2r"><br></span>
<strong>Development Head:</strong> <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+https://github.com/MMV-Lab/mmv_im2im.git</span></code></p>
</section>
<section id="build-from-source">
<h3>build from source<a class="headerlink" href="#build-from-source" title="Permalink to this heading">¶</a></h3>
<p>(for users planning to extend the methods or improve the code):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">MMV</span><span class="o">-</span><span class="n">Lab</span><span class="o">/</span><span class="n">mmv_im2im</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">mmv_im2im</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span><span class="p">[</span><span class="nb">all</span><span class="p">]</span>
</pre></div>
</div>
<p>Note: The <code class="docutils literal notranslate"><span class="pre">-e</span></code> option is the so-called “editable” mode. This will allow code changes taking effect immediately.</p>
</section>
</section>
<section id="quick-start-try-out-on-a-simple-example">
<h2>Quick start / Try out on a simple example<a class="headerlink" href="#quick-start-try-out-on-a-simple-example" title="Permalink to this heading">¶</a></h2>
<p>Here, we use a <a class="reference external" href="https://www.allencell.org/label-free-determination.html#:~:text=The%20Label-Free%20Determination%20model%20can%20leverage%20the%20specificity,structures.%20How%20does%20the%20label-free%20determination%20model%20work%3F">3D labelfree prediction</a> as an example. (If you followed <a class="reference external" href="#basic-installation">basic installation</a>, you will need to install the <code class="docutils literal notranslate"><span class="pre">quilt3</span></code> package by <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">quilt3</span></code>, in order to download the data programmatically.)</p>
<p><strong>step 1 (data preparation):</strong>, we pull 100 examples of lamin B1 images and the corresponding brightfield images from the AllenCell quilt bucket by running the following in the command line.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Suppose the current working directory is the root of mmv_im2im</span>
python  scripts/pull_labelfree_sample_data.py --download_path /path/to/save/the/downloaded/images/ --structure LMNB1 --num <span class="m">100</span>
</pre></div>
</div>
<p><strong>step 2 (train):</strong> Now, we can train a labelfree model like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Suppose the current working directory is the root of mmv_im2im</span>
run_im2im --config train_labelfree_3d  --data.data_path /path/to/save/the/downloaded/train
</pre></div>
</div>
<p>This will apply all the default settings to train the 3D labelfree model. The training will stop after 100 epochs,</p>
<p><strong>step 3 (test):</strong></p>
<p>Suppose you run the training under the root of mmv_im2im. Then you will find a folder <code class="docutils literal notranslate"><span class="pre">mmv_im2im/lightning_logs/checkpoints</span></code>, where you can find several trained model. Here, we test with the model after the full training <code class="docutils literal notranslate"><span class="pre">last.ckpt</span></code> (other models are intermediate results for debugging purpose) by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Suppose the current working directory is the root of mmv_im2im</span>
run_im2im --config inference_labelfree_3d --data.inference_input.dir /path/to/save/the/downloaded/holdout --data.inference_output.path /path/to/save/predictions/ --model.checkpoint lightning_logs/checkpoints/last.ckpt
</pre></div>
</div>
</section>
<section id="walk-through-guide">
<h2>Walk-through Guide<a class="headerlink" href="#walk-through-guide" title="Permalink to this heading">¶</a></h2>
<p>We provide <a class="reference external" href="tutorials/README.md">a tutorial</a> for users to understand how to enjoy both the simplicity and the full flexibility of the package.</p>
<p>The scripts and configurations for reproducing our experiments in the <a class="reference external" href="https://arxiv.org/abs/2209.02498">pre-print</a> can also be used as examples for walking through different applications.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Application</p></th>
<th class="head"><p>data preparation</p></th>
<th class="head"><p>training config</p></th>
<th class="head"><p>inference config</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3D labelfree prediction</p></td>
<td><p><a class="reference external" href="script/pull_labelfree_sample_data.py">script</a></p></td>
<td><p><a href="#id4"><span class="problematic" id="id5">`supervisedFCN &lt;&gt;`_</span></a>, <a href="#id6"><span class="problematic" id="id7">`supervisedPix2pix &lt;&gt;`_</span></a>, <a href="#id8"><span class="problematic" id="id9">`unsupervised &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id10"><span class="problematic" id="id11">`supervisedFCN &lt;&gt;`_</span></a>, <a href="#id12"><span class="problematic" id="id13">`supervisedPix2pix &lt;&gt;`_</span></a>, <a href="#id14"><span class="problematic" id="id15">`unsupervised &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>2D labelfree prediction</p></td>
<td><p><a href="#id16"><span class="problematic" id="id17">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id18"><span class="problematic" id="id19">`supervisedFCN &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id20"><span class="problematic" id="id21">`supervisedFCN &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-even"><td><p>2D semantic segmentation</p></td>
<td><p><a href="#id22"><span class="problematic" id="id23">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id24"><span class="problematic" id="id25">`supervisedFCN &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id26"><span class="problematic" id="id27">`supervisedFCN &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>3D semantic segmentation</p></td>
<td><p><a href="#id28"><span class="problematic" id="id29">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id30"><span class="problematic" id="id31">`supervisedFCN &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id32"><span class="problematic" id="id33">`supervisedFCN &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-even"><td><p>2D instance segmentation</p></td>
<td><p><a href="#id34"><span class="problematic" id="id35">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id36"><span class="problematic" id="id37">`supervisedEmbedSeg &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id38"><span class="problematic" id="id39">`supervisedEmbedseg &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>3D instance segmentation</p></td>
<td><p><a href="#id40"><span class="problematic" id="id41">`script &lt;&gt;`_</span></a></p></td>
<td><p><a class="reference external" href="./paper_configs/train_embedseg_3d.yaml">supervisedEmbedSeg_fluo</a>, <a class="reference external" href="./paper_configs/train_embedseg_3d_BF.yaml">supervisedEmbedSeg_bf</a></p></td>
<td><p><a class="reference external" href="./paper_configs/inference_embedseg_3d.yaml">supervisedEmbedseg_fluo</a>, <a class="reference external" href="./paper_configs/inference_embedseg_3d_bf.yaml">supervisedEmbedSeg_bf</a></p></td>
</tr>
<tr class="row-even"><td><p>2D unsupervised segmentation</p></td>
<td><p><a href="#id42"><span class="problematic" id="id43">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id44"><span class="problematic" id="id45">`unsupervised &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id46"><span class="problematic" id="id47">`unsupervised &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>3D unsupervised segmentation</p></td>
<td><p><a href="#id48"><span class="problematic" id="id49">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id50"><span class="problematic" id="id51">`unsupervised &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id52"><span class="problematic" id="id53">`unsupervised &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-even"><td><p>2D synthetic image generation</p></td>
<td><p><a href="#id54"><span class="problematic" id="id55">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id56"><span class="problematic" id="id57">`supervisedPix2pix &lt;&gt;`_</span></a>, <a href="#id58"><span class="problematic" id="id59">`unsupervised &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id60"><span class="problematic" id="id61">`supervisedPix2pix &lt;&gt;`_</span></a>, <a href="#id62"><span class="problematic" id="id63">`unsupervised &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>3D synthetic image generation</p></td>
<td><p><a href="#id64"><span class="problematic" id="id65">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id66"><span class="problematic" id="id67">`supervisedPix2pix &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id68"><span class="problematic" id="id69">`supervisedPix2pix &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-even"><td><p>image restoration / denoising</p></td>
<td><p><a href="#id70"><span class="problematic" id="id71">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id72"><span class="problematic" id="id73">`supervisedFCN &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id74"><span class="problematic" id="id75">`supervisedFCN &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>image modality transfer</p></td>
<td><p><a href="#id76"><span class="problematic" id="id77">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id78"><span class="problematic" id="id79">`supervisedFCN &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id80"><span class="problematic" id="id81">`supervisedFCN &lt;&gt;`_</span></a></p></td>
</tr>
<tr class="row-even"><td><p>staining transformation</p></td>
<td><p><a href="#id82"><span class="problematic" id="id83">`script &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id84"><span class="problematic" id="id85">`supervisedPix2pix &lt;&gt;`_</span></a></p></td>
<td><p><a href="#id86"><span class="problematic" id="id87">`supervisedPix2pix &lt;&gt;`_</span></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this heading">¶</a></h2>
<p>For full package API (i.e., the technical details of each function), please visit <a class="reference external" href="https://MMV-Lab.github.io/mmv_im2im">MMV-Lab.github.io/mmv_im2im</a>.</p>
</section>
<section id="development">
<h2>Development<a class="headerlink" href="#development" title="Permalink to this heading">¶</a></h2>
<p>See <a class="reference external" href="CONTRIBUTING.md">CONTRIBUTING.md</a> for information related to developing the code.</p>
<p><strong>MIT license</strong></p>
</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Jianxu Chen.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>